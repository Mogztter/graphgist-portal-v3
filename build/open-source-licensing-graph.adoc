= Open Source Licensing Graph =

This gist is explain the Open Source Licensing Graph, based on the wonderful data from http://choosealicense.com/[ChoosALicense.com], a http://www.github.com[github] service. I wrote a small blogpost around it too on http://blog.bruggen.com/2014/01/the-open-source-licensing-graph.html[my blog].

First we have to load the data into the graph. This was a bit of work - but not difficult at all:

//hide
//setup
//output
[source,cypher]
----
// create the nodes
create (n1:License {id:1,name:'Apache'}),
(n2:License {id:2,name:'GPLv3'}),
(n3:License {id:3,name:'GPLv2'}),
(n4:License {id:4,name:'Affero GPLv3'}),
(n5:License {id:5,name:'MIT'}),
(n6:License {id:6,name:'Artistic'}),
(n7:License {id:7,name:'BSD-2clause'}),
(n8:License {id:8,name:'BSD-3clause'}),
(n9:License {id:9,name:'Eclipse'}),
(n10:License {id:10,name:'LGPLv2.1'}),
(n11:License {id:11,name:'LGPLv3'}),
(n12:License {id:12,name:'Mozilla'}),
(n13:License {id:13,name:'No License'}),
(n14:License {id:14,name:'Public Domain Dedication - Unlicense'}),
(n15:License {id:15,name:'Public Domain Dedication - CCO 1.0 Universal'}),
(n100:Characteristic {id:100,name:'License and copyright notice'}),
(n101:Characteristic {id:101,name:' State Changes'}),
(n102:Characteristic {id:102,name:' Commercial Use'}),
(n103:Characteristic {id:103,name:' Distribution'}),
(n104:Characteristic {id:104,name:' Modification'}),
(n105:Characteristic {id:105,name:' Patent Grant'}),
(n106:Characteristic {id:106,name:' Private Use'}),
(n107:Characteristic {id:107,name:' Sublicensing'}),
(n108:Characteristic {id:108,name:' Hold Liable'}),
(n109:Characteristic {id:109,name:' Use Trademark'}),
(n110:Characteristic {id:110,name:'Disclose Source'}),
(n111:Characteristic {id:111,name:' License and copyright notice'}),
(n112:Characteristic {id:112,name:' Library usage'}),
 // create the relationships

create (n1)-[:REQUIRES]->(n100),
create (n1)-[:REQUIRES]->(n101),
create (n1)-[:PERMITS]->(n102),
create (n1)-[:PERMITS]->(n103),
create (n1)-[:PERMITS]->(n104),
create (n1)-[:PERMITS]->(n105),
create (n1)-[:PERMITS]->(n106),
create (n1)-[:PERMITS]->(n107),
create (n1)-[:FORBIDS]->(n108),
create (n1)-[:FORBIDS]->(n109),
create (n2)-[:REQUIRES]->(n110),
create (n2)-[:REQUIRES]->(n111),
create (n2)-[:REQUIRES]->(n101),
create (n2)-[:PERMITS]->(n102),
create (n2)-[:PERMITS]->(n103),
create (n2)-[:PERMITS]->(n104),
create (n2)-[:PERMITS]->(n105),
create (n2)-[:PERMITS]->(n106),
create (n2)-[:FORBIDS]->(n108),
create (n2)-[:FORBIDS]->(n107),
create (n3)-[:REQUIRES]->(n110),
create (n3)-[:REQUIRES]->(n111),
create (n3)-[:REQUIRES]->(n101),
create (n3)-[:PERMITS]->(n102),
create (n3)-[:PERMITS]->(n103),
create (n3)-[:PERMITS]->(n104),
create (n3)-[:PERMITS]->(n105),
create (n3)-[:PERMITS]->(n106),
create (n3)-[:FORBIDS]->(n108),
create (n3)-[:FORBIDS]->(n107),
create (n4)-[:REQUIRES]->(n110),
create (n4)-[:REQUIRES]->(n111),
create (n4)-[:REQUIRES]->(n101),
create (n4)-[:PERMITS]->(n102),
create (n4)-[:PERMITS]->(n103),
create (n4)-[:PERMITS]->(n104),
create (n4)-[:PERMITS]->(n106),
create (n4)-[:FORBIDS]->(n108),
create (n4)-[:FORBIDS]->(n107),
create (n5)-[:REQUIRES]->(n100),
create (n5)-[:PERMITS]->(n102),
create (n5)-[:PERMITS]->(n103),
create (n5)-[:PERMITS]->(n104),
create (n5)-[:PERMITS]->(n106),
create (n5)-[:PERMITS]->(n107),
create (n5)-[:FORBIDS]->(n108),
create (n6)-[:REQUIRES]->(n100),
create (n6)-[:REQUIRES]->(n101),
create (n6)-[:PERMITS]->(n102),
create (n6)-[:PERMITS]->(n103),
create (n6)-[:PERMITS]->(n104),
create (n6)-[:PERMITS]->(n106),
create (n6)-[:PERMITS]->(n107),
create (n6)-[:FORBIDS]->(n108),
create (n6)-[:FORBIDS]->(n109),
create (n7)-[:REQUIRES]->(n100),
create (n7)-[:PERMITS]->(n102),
create (n7)-[:PERMITS]->(n103),
create (n7)-[:PERMITS]->(n104),
create (n7)-[:PERMITS]->(n106),
create (n7)-[:PERMITS]->(n107),
create (n7)-[:FORBIDS]->(n108),
create (n8)-[:REQUIRES]->(n100),
create (n8)-[:PERMITS]->(n102),
create (n8)-[:PERMITS]->(n103),
create (n8)-[:PERMITS]->(n104),
create (n8)-[:PERMITS]->(n106),
create (n8)-[:PERMITS]->(n107),
create (n8)-[:FORBIDS]->(n108),
create (n8)-[:FORBIDS]->(n109),
create (n9)-[:REQUIRES]->(n110),
create (n9)-[:REQUIRES]->(n111),
create (n9)-[:PERMITS]->(n102),
create (n9)-[:PERMITS]->(n103),
create (n9)-[:PERMITS]->(n104),
create (n9)-[:PERMITS]->(n105),
create (n9)-[:PERMITS]->(n106),
create (n9)-[:PERMITS]->(n107),
create (n9)-[:FORBIDS]->(n108),
create (n10)-[:REQUIRES]->(n110),
create (n10)-[:REQUIRES]->(n112),
create (n10)-[:REQUIRES]->(n111),
create (n10)-[:PERMITS]->(n102),
create (n10)-[:PERMITS]->(n103),
create (n10)-[:PERMITS]->(n104),
create (n10)-[:PERMITS]->(n105),
create (n10)-[:PERMITS]->(n106),
create (n10)-[:PERMITS]->(n107),
create (n10)-[:FORBIDS]->(n108),
create (n11)-[:REQUIRES]->(n110),
create (n11)-[:REQUIRES]->(n112),
create (n11)-[:REQUIRES]->(n111),
create (n11)-[:PERMITS]->(n102),
create (n11)-[:PERMITS]->(n103),
create (n11)-[:PERMITS]->(n104),
create (n11)-[:PERMITS]->(n105),
create (n11)-[:PERMITS]->(n106),
create (n11)-[:PERMITS]->(n107),
create (n11)-[:FORBIDS]->(n108),
create (n12)-[:REQUIRES]->(n110),
create (n12)-[:REQUIRES]->(n111),
create (n12)-[:PERMITS]->(n102),
create (n12)-[:PERMITS]->(n103),
create (n12)-[:PERMITS]->(n104),
create (n12)-[:PERMITS]->(n105),
create (n12)-[:PERMITS]->(n106),
create (n12)-[:PERMITS]->(n107),
create (n12)-[:FORBIDS]->(n108),
create (n12)-[:FORBIDS]->(n109),
create (n13)-[:REQUIRES]->(n100),
create (n13)-[:PERMITS]->(n102),
create (n13)-[:PERMITS]->(n106),
create (n13)-[:FORBIDS]->(n103),
create (n13)-[:FORBIDS]->(n104),
create (n13)-[:FORBIDS]->(n107),
create (n14)-[:PERMITS]->(n102),
create (n14)-[:PERMITS]->(n103),
create (n14)-[:PERMITS]->(n104),
create (n14)-[:PERMITS]->(n106),
create (n14)-[:FORBIDS]->(n108),
create (n15)-[:PERMITS]->(n102),
create (n15)-[:PERMITS]->(n103),
create (n15)-[:PERMITS]->(n104),
create (n15)-[:PERMITS]->(n106),
create (n15)-[:FORBIDS]->(n108);
----

The actual graph then looks like this:

//graph

Then we can do some easy queries. Like for example: show me the requirements of the GPLv3:

[source,cypher]
----
MATCH (n:License {name:"GPLv3"})-[r]-(m:Characteristic)
RETURN n.name as License, type(r) as Qualifier, m.name as Characteristic;
----

The results are interesting:

//table

Or lets try to see how the GPLv3 and Apache licenses are connected:

[source,cypher]
----
MATCH p = AllShortestPaths((n:License {name:"GPLv3"})-[*]-(m:License {name:"Apache"}))
RETURN p;
----

//table

This is interesting: there seems to be a contradiction here, which we can explore:
[source, cypher]
----
MATCH (n:License {name:"GPLv3"})-[r1]-(c:Characteristic)-[r2]-(m:License {name:"Apache"})
WHERE type(r1)<>type(r2)
RETURN n.name as License1, type(r1) as Qualifier1, c.name as Characteristic, type(r2) as Qualifier2, m.name as License2;
----

//table

Let's see if we can do something similar for other licenses?

[source, cypher]
----
MATCH (n:License)-[r1:PERMITS|FORBIDS]->(c:Characteristic)<-[r2:PERMITS|FORBIDS]-(m:License)
WHERE type(r1)<>type(r2)
RETURN distinct n.name as License1, type(r1) as Qualifier1, c.name as Characteristic, type(r2) as Qualifier2, m.name as License2;
----

//table

So there we go! All the contradictions between all of the different licenses!

To play some more, use the console below. Enjoy!

//console

This gist was created by link:mailto:rik@neotechnology.com[Rik Van Bruggen]

* link:http://blog.bruggen.com[My Blog]
* link:http://twitter.com/rvanbruggen[On Twitter]
* link:http://be.linkedin.com/in/rikvanbruggen/[On LinkedIn]
