= DC & Marvel Comics Characters
:neo4j-version: 3.5
:author: Matteo Muscella
:twitter: @MattMusc
:style: red:Character(name) purple:Publisher(name) green:Identity(name) yellow:Sex(sex) blue:Alley(name)

// Please use the style & syntax-help outlined here: https://github.com/neo4j-contrib/graphgist/blob/master/gists/syntax.adoc
// This is also a good example for a GraphGist: https://gist.github.com/jexp/2014efa6448b307c65e9

== Introduction

The following graph provides a direct view of some of our beloved comics Characters.
These characters are taken from both DC and Marvel publishing companies.

////
Provide an introduction to your domain and what you are trying to accomplish, link to http://a.source.com[sources] as needed.

Provide a domain model image - using something like http://www.apcjones.com/arrows/# or https://www.gliffy.com/ or a readable screenshot from Neo4j-Browser.

You can run this query to get an overview of entities and how they are related:
MATCH (a)-[r]->(b) WHERE labels(a) <> [] AND labels(b) <> []
RETURN DISTINCT head(labels(a)) AS This, type(r) as To, head(labels(b)) AS That LIMIT 10
////

image::http://i.imgur.com/6qcrsaz.png[width=600]

== Setup

////
A Cypher query to setup the database
Please use a small sample of your domain, at most 150 nodes and 200 relationships are enough for the pedagocial example.
You can link to the setup of a larger dataset or LOAD CSV queries in a second file of your GitHub Gist at the end.
In your setup query you can also use LOAD CSV loading CSV files from your GitHub Gist, like here: https://gist.github.com/jexp/f78df7b232d0faa171ff
////

//setup
//hide
[source,cypher]
----
CREATE (marvel:Publisher { name:"Marvel Comics", year:"1939" })
CREATE (dc:Publisher { name:"DC Comics", year:"1934" })

CREATE (public:Identity { identity:"Public" })
CREATE (secret:Identity { identity:"Secret" })
CREATE (noidentity:Identity { identity:"No dual identity" })

CREATE (male:Sex { sex:"Male" })
CREATE (female:Sex { sex:"Female" })

CREATE (batman:Character { name:"Bruce Wayne", nickname:"Batman" })
CREATE (batman)-[:CREATED_BY]->(dc)
CREATE (batman)-[:IDENTITY]->(secret)
CREATE (batman)-[:SEX]->(male)

CREATE (superman:Character { name:"Clark Kent", nickname:"Superman" })
CREATE (superman)-[:CREATED_BY]->(dc)
CREATE (superman)-[:IDENTITY]->(secret)
CREATE (superman)-[:SEX]->(male)

CREATE (flash:Character { name:"Barry Allen", nickname:"Flash" })
CREATE (flash)-[:CREATED_BY]->(dc)
CREATE (flash)-[:IDENTITY]->(secret)
CREATE (flash)-[:SEX]->(male)

CREATE (wonderwoman:Character { name:"Diana Prince", nickname:"Wonder Woman" })
CREATE (wonderwoman)-[:CREATED_BY]->(dc)
CREATE (wonderwoman)-[:IDENTITY]->(public)
CREATE (wonderwoman)-[:SEX]->(female)

CREATE (spiderman:Character { name:"Peter Parker", nickname:"Spider-Man" })
CREATE (spiderman)-[:CREATED_BY]->(marvel)
CREATE (spiderman)-[:IDENTITY]->(secret)
CREATE (spiderman)-[:SEX]->(male)

CREATE (captainamerica:Character { name:"Steven Rogers", nickname:"Captain America" })
CREATE (captainamerica)-[:CREATED_BY]->(marvel)
CREATE (captainamerica)-[:IDENTITY]->(public)
CREATE (captainamerica)-[:SEX]->(male)

CREATE (wolverine:Character { name:"James Logan Howlett", nickname:"Wolverine" })
CREATE (wolverine)-[:CREATED_BY]->(marvel)
CREATE (wolverine)-[:IDENTITY]->(public)
CREATE (wolverine)-[:SEX]->(male)

CREATE (ironman:Character { name:"Anthony Tony Stark", nickname:"Iron Man" })
CREATE (ironman)-[:CREATED_BY]->(marvel)
CREATE (ironman)-[:IDENTITY]->(public)
CREATE (ironman)-[:SEX]->(male)

CREATE (hulk:Character { name:"Robert Bruce Banner", nickname:"Hulk" })
CREATE (hulk)-[:CREATED_BY]->(marvel)
CREATE (hulk)-[:IDENTITY]->(public)
CREATE (hulk)-[:SEX]->(male)

CREATE (catwoman:Character { name:"Selina Kyle", nickname:"Catwoman" })
CREATE (catwoman)-[:CREATED_BY]->(marvel)
CREATE (catwoman)-[:IDENTITY]->(secret)
CREATE (catwoman)-[:SEX]->(female)

CREATE (drdoom:Character { name:"Victor Von Doom", nickname:"Doctor Doom" })
CREATE (drdoom)-[:CREATED_BY]->(marvel)
CREATE (drdoom)-[:IDENTITY]->(secret)
CREATE (drdoom)-[:SEX]->(male)

CREATE (lexluthor:Character { name:"Lex Luthor", nickname:"Lex" })
CREATE (lexluthor)-[:CREATED_BY]->(dc)
CREATE (lexluthor)-[:IDENTITY]->(noidentity)
CREATE (lexluthor)-[:SEX]->(male)

----

//graph

== Get all characters who have a Secret Identity

[source,cypher]
----
MATCH(c:Character)-[:IDENTITY]->(i:Identity {identity:"Secret"}) RETURN c.nickname AS Nickname, c.name AS Name, i.identity AS Identity
----

//table

== Get all female characters from Marvel

[source,cypher]
----
MATCH (c:Character)-[:SEX]->(i:Sex {sex:"Female"}), (c:Character)-[:CREATED_BY]->(p:Publisher {name:"Marvel Comics"}) RETURN c
----

//graph_result

== Get all characters who have a Public Identity

[source,cypher]
----
MATCH(c:Character)-[:IDENTITY]->(i:Identity {identity:"Public"}) RETURN c.nickname AS Nickname, c.name AS Name, i.identity AS Identity
----

//table


////
// You can also use both graph_result and then table if you return full nodes, relationships or paths
////

// optional section
== Resources

http://dc.wikia.com/wiki/DC_Comics_Database[DC Comics Database]
http://marvel.wikia.com/wiki/Marvel_Database[Marvel Comics Database]

// optional Footer
---

Created by {author} - https://twitter.com/{twitter}[Twitter] | https://in.linkedin.com/in/linked-in-handle/[LinkedIn]